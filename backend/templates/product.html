{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% if product %}{{ product.short_description|default:product.description|truncatewords:20 }}{% else %}Product Details - Skilcart{% endif %}">
    <title>{% if product %}{{ product.name }} - Skilcart{% else %}Product Details - Skilcart{% endif %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="container header-top-inner">
                <div class="logo">
                    <a href="/">SKIL<span>CART</span></a>
                </div>
                <nav class="top-nav">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="https://wa.me/919712237383" target="_blank">WhatsApp</a></li>
                        <li><a href="/#reels-bundle">Reels Bundle</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="header-bottom">
            <div class="container header-bottom-inner">
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav class="nav" id="mainNav">
                    <ul class="nav-list">
                        <li><a href="/">Home</a></li>
                        <li><a href="/#reels-bundle">Combo Reels bundle</a></li>
                        <li><a href="/#reels-bundle">Instagram Reels Bundle</a></li>
                        <li><a href="/?price=99">Reels bundle &#8377;99</a></li>
                        <li><a href="/?price=149">Reels bundle &#8377;149</a></li>
                        <li><a href="/?price=199">Reels bundle &#8377;199</a></li>
                        <li><a href="/?price=249">Reels bundle &#8377;249</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Product Page Content -->
    <main class="product-page">
        <div class="container">
            <div class="product-layout">
                <!-- Main Content Column -->
                <div class="product-main">
                    {% if error %}
                    <!-- Error State -->
                    <div style="text-align: center; padding: 3rem;">
                        <h2>Product Not Found</h2>
                        <p>{{ error }}</p>
                        <a href="/" style="color: #003a12; text-decoration: underline;">Go back to homepage</a>
                    </div>
                    {% elif product %}
                    <!-- Breadcrumb -->
                    <nav class="breadcrumb">
                        <a href="/">Home</a> &gt; 
                        <a href="/#reels-bundle">Reels Bundle</a> &gt; 
                        <span>{{ product.name }}</span>
                    </nav>

                    <!-- Product Title -->
                    <h1 class="product-page-title">{{ product.name }}</h1>

                    <!-- Brand Tag -->
                    <div class="product-brand">
                        <span>&#128193; Skilcart</span>
                    </div>

                    <!-- Product Image -->
                    <div class="product-featured-image">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 100%; height: auto; border-radius: 8px;">
                        {% elif product.image_url %}
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" style="width: 100%; height: auto; border-radius: 8px;">
                        {% else %}
                            <div class="product-banner-placeholder" style="background: linear-gradient(135deg, #1dbf73, #003a12); color: white; display: flex; align-items: center; justify-content: center; height: 400px; font-size: 2rem; font-weight: 700; border-radius: 8px;">
                                {{ product.name }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Action Bar (Price + Download) -->
                    <div class="product-action-bar">
                        <div class="product-price-info">
                            <div class="product-price">&#8377;{{ product.price }}</div>
                            {% if product.discount_percentage > 0 %}
                            <div class="product-discount">{{ product.discount_percentage }}% OFF</div>
                            {% endif %}
                        </div>
                        <a href="/checkout.html?slug={{ product.slug }}" class="product-download-btn">
                            &#127775; Download Now
                        </a>
                    </div>

                    <!-- Product Description -->
                    <div class="product-description">
                        <h2>About This Bundle</h2>
                        <p>{{ product.description|linebreaks }}</p>
                        
                        {% if product.what_included %}
                        <h3>What's Included:</h3>
                        <ul>
                            {% for item in product.what_included %}
                            <li>{{ item }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        {% if product.features %}
                        <h3>Key Benefits:</h3>
                        <ul>
                            {% for feature in product.features %}
                            <li>{{ feature }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        {% if product.perfect_for %}
                        <h3>Perfect For:</h3>
                        <ul>
                            {% for item in product.perfect_for %}
                            <li>{{ item }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        <h3>How It Works:</h3>
                        <ol>
                            <li>Click the "Download Now" button</li>
                            <li>Complete the secure checkout</li>
                            <li>Get instant access to all reels</li>
                            <li>Start posting and growing your audience!</li>
                        </ol>
                        
                        <p><strong>Note:</strong> This is a digital product. You will receive download links immediately after purchase.</p>
                    </div>
                    {% else %}
                    <!-- Loading State -->
                    <div style="text-align: center; padding: 3rem;">
                        <i class="fa-solid fa-spinner fa-spin" style="font-size: 2rem;"></i>
                        <p>Loading product details...</p>
                    </div>
                    {% endif %}
                </div>

                <!-- Sidebar Column -->
                <aside class="product-sidebar">
                    {% if product %}
                    <!-- Pricing Widget -->
                    <div class="sidebar-widget pricing-widget">
                        <h3>Get This Bundle</h3>
                        <div class="sidebar-price">
                            <span class="price-current">&#8377;{{ product.price }}</span>
                            {% if product.original_price %}
                            <span class="price-original">&#8377;{{ product.original_price }}</span>
                            {% endif %}
                        </div>
                        {% if product.discount_percentage > 0 %}
                        <div class="sidebar-discount">{{ product.discount_percentage }}% OFF - Limited Time!</div>
                        {% endif %}
                        <a href="/checkout.html?slug={{ product.slug }}" class="sidebar-download-btn">
                            &#127775; Download Now
                        </a>
                        <div class="sidebar-features">
                            <div class="feature-item">&#10003; Instant Download</div>
                            <div class="feature-item">&#10003; Lifetime Access</div>
                            <div class="feature-item">&#10003; All Reels</div>
                            <div class="feature-item">&#10003; HD Quality</div>
                        </div>
                    </div>

                    <!-- Related Products Widget -->
                    {% if related_products %}
                    <div class="sidebar-widget related-widget">
                        <h3>Get Epic Viral Reels Bundle</h3>
                        <ul class="related-products-list">
                            {% for related in related_products %}
                            <li><a href="/product.html?slug={{ related.slug }}">{{ related.name }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}

                    <!-- Tags Widget -->
                    {% if tags %}
                    <div class="sidebar-widget tags-widget">
                        <h3>Tags</h3>
                        <div class="product-tags">
                            {% for tag in tags %}
                            <span class="tag">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>SKILCART</h3>
                    <p>Best Digital Product In India</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms &amp; Conditions</a></li>
                        <li><a href="#">Refund Policy</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Digital Planner 2025</a></li>
                        <li><a href="/#reels-bundle">Reels Bundle</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="footer-social">
                        <a href="https://instagram.com/mr_sebby_yt" target="_blank">Instagram</a>
                        <a href="https://wa.me/919712237383" target="_blank">WhatsApp</a>
                        <a href="https://youtube.com/@mr_sebby?si=cKM9OKvrKpDiuMq-" target="_blank">YouTube</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Skil Cart All Right Reserved</p>
            </div>
        </div>
    </footer>

    <!-- Original Script -->
    <script src="{% static 'js/script.js' %}"></script>
    
    {% if product %}
    <!-- Store product data for JavaScript if needed -->
    <script>
        // Product data available for any JavaScript interactions
        window.productData = {
            id: {{ product.id }},
            slug: '{{ product.slug }}',
            name: '{{ product.name|escapejs }}',
            price: {{ product.price }},
            originalPrice: {{ product.original_price|default:product.price }},
            discountPercentage: {{ product.discount_percentage }}
        };
    </script>
    {% endif %}
</body>

</html>

